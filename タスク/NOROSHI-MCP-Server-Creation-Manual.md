# ğŸŒ NOROSHI MCPã‚µãƒ¼ãƒãƒ¼ä½œæˆãƒãƒ‹ãƒ¥ã‚¢ãƒ«

## ğŸ“‹ ç›®æ¬¡

1. [ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦](#ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦)
2. [ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ](#ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ)
3. [å‰ææ¡ä»¶ãƒ»æº–å‚™](#å‰ææ¡ä»¶æº–å‚™)
4. [ã‚¹ãƒ†ãƒƒãƒ—1: åŸºç›¤æ§‹ç¯‰](#ã‚¹ãƒ†ãƒƒãƒ—1-åŸºç›¤æ§‹ç¯‰)
5. [ã‚¹ãƒ†ãƒƒãƒ—2: Slacké€£æºå®Ÿè£…](#ã‚¹ãƒ†ãƒƒãƒ—2-slacké€£æºå®Ÿè£…)
6. [ã‚¹ãƒ†ãƒƒãƒ—3: GitHubé€£æºå®Ÿè£…](#ã‚¹ãƒ†ãƒƒãƒ—3-githubé€£æºå®Ÿè£…)
7. [ã‚¹ãƒ†ãƒƒãƒ—4: MCPæ©Ÿèƒ½å®Ÿè£…](#ã‚¹ãƒ†ãƒƒãƒ—4-mcpæ©Ÿèƒ½å®Ÿè£…)
8. [ã‚¹ãƒ†ãƒƒãƒ—5: è‡ªå‹•åŒ–æ©Ÿèƒ½å®Ÿè£…](#ã‚¹ãƒ†ãƒƒãƒ—5-è‡ªå‹•åŒ–æ©Ÿèƒ½å®Ÿè£…)
9. [ã‚¹ãƒ†ãƒƒãƒ—6: ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ»é‹ç”¨](#ã‚¹ãƒ†ãƒƒãƒ—6-ãƒ‡ãƒ—ãƒ­ã‚¤é‹ç”¨)
10. [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](#ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°)

---

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

### ğŸ¯ NOROSHI MCPã‚µãƒ¼ãƒãƒ¼ã¨ã¯

NOROSHI MCPã‚µãƒ¼ãƒãƒ¼ã¯ã€Cloudflare Workersä¸Šã§å‹•ä½œã™ã‚‹ãƒªãƒ¢ãƒ¼ãƒˆMCPã‚µãƒ¼ãƒãƒ¼ã§ã™ã€‚Slackã€GitHubã€Cursorã‚’çµ±åˆã—ã€AIé§†å‹•ã®ã‚¿ã‚¹ã‚¯ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã‚’æä¾›ã—ã¾ã™ã€‚

### ğŸ—ï¸ ä¸»è¦æ©Ÿèƒ½

1. **Slack Events APIçµ±åˆ**
   - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¿ã‚¹ã‚¯å‡¦ç†
   - ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³è‡ªå‹•å¿œç­”
   - ãƒãƒ£ãƒ³ãƒãƒ«é–“è‡ªå‹•è»¢é€

2. **GitHub APIé€£æº**
   - ã‚¿ã‚¹ã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†ï¼ˆ`ã‚¿ã‚¹ã‚¯/`ãƒ•ã‚©ãƒ«ãƒ€ï¼‰
   - è‡ªå‹•ãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›†ãƒ»ä½œæˆ
   - ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†

3. **MCP Protocolå®Ÿè£…**
   - Cursor/Claude Desktopçµ±åˆ
   - 14ç¨®é¡ã®MCPãƒ„ãƒ¼ãƒ«
   - ãƒªãƒ¢ãƒ¼ãƒˆã‚µãƒ¼ãƒãƒ¼å¯¾å¿œ

4. **è‡ªå‹•åŒ–æ©Ÿèƒ½**
   - å®šæœŸã‚¿ã‚¹ã‚¯ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ï¼ˆ22:05-22:45 JSTï¼‰
   - ãƒœãƒƒãƒˆãƒ«ãƒ¼ãƒ—é˜²æ­¢
   - ã‚­ãƒ£ãƒƒã‚·ãƒ¥æœ€é©åŒ–

### ğŸ“Š æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- **Runtime**: Cloudflare Workers
- **Language**: TypeScript
- **Protocol**: MCP (Model Context Protocol)
- **APIs**: Slack Events API, GitHub API
- **Storage**: GitHub Repository
- **Deployment**: Wrangler CLI

---

## ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ

### ğŸ”„ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Cursor/Claude â”‚â”€â”€â”€â”€â”‚ Cloudflare MCP   â”‚â”€â”€â”€â”€â”‚   GitHub API    â”‚
â”‚     Desktop     â”‚    â”‚     Server       â”‚    â”‚  (ã‚¿ã‚¹ã‚¯ãƒ•ã‚¡ã‚¤ãƒ«) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                        â”‚                        â”‚
        â”‚                        â”‚                        â”‚
        â–¼                        â–¼                        â–¼
   è‡ªç„¶è¨€èªæŒ‡ç¤º            MCP Protocol            ã‚¿ã‚¹ã‚¯ãƒ‡ãƒ¼ã‚¿
                                â”‚
                                â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚   Slack API      â”‚
                        â”‚  (è‡ªå‹•å¿œç­”)       â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ—‚ï¸ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
NOROSHI/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ index.ts                 # ãƒ¡ã‚¤ãƒ³ã‚µãƒ¼ãƒãƒ¼ã‚³ãƒ¼ãƒ‰ (2641è¡Œ)
â”œâ”€â”€ ã‚¿ã‚¹ã‚¯/                      # GitHubã‚¿ã‚¹ã‚¯ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ tasks.md                 # æ±ç”¨ã‚¿ã‚¹ã‚¯ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ 2025-06-16-tasks.md      # æ—¥ä»˜åˆ¥ã‚¿ã‚¹ã‚¯
â”‚   â””â”€â”€ all-tasks.md             # å…¨ã‚¿ã‚¹ã‚¯çµ±åˆ
â”œâ”€â”€ wrangler.toml                # Cloudflareè¨­å®š
â”œâ”€â”€ package.json                 # ä¾å­˜é–¢ä¿‚
â”œâ”€â”€ README.md                    # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆèª¬æ˜
â””â”€â”€ DEVELOPMENT.md               # é–‹ç™ºã‚¬ã‚¤ãƒ‰
```

### ğŸ”— å¤–éƒ¨é€£æº

1. **Slack Workspace**
   - Team ID: `tatsu0823takasago`
   - Channels: `#general` (C02TJS8D205), `#ã‚¿ã‚¹ã‚¯` (C091H8NUJ8L)
   - Bot: NOROSHI-AI (U091UQ2ATPB)

2. **GitHub Repository**
   - Owner: `TaT22444`
   - Repo: `slack-mcp`
   - URL: `https://github.com/TaT22444/slack-mcp.git`

3. **Cloudflare Workers**
   - Account: `tatsu0823takasago@icloud.com`
   - Worker Name: `noroshi-mcp-server`
   - URL: `https://noroshi-mcp-server.tatsu0823takasago.workers.dev/`

---

## å‰ææ¡ä»¶ãƒ»æº–å‚™

### ğŸ’» é–‹ç™ºç’°å¢ƒ

- **Node.js**: 18ä»¥ä¸Š
- **Package Manager**: npm/yarn
- **Git**: ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†
- **Cloudflare Account**: Workersåˆ©ç”¨
- **Slack Workspace**: ç®¡ç†è€…æ¨©é™
- **GitHub Account**: Personal Access Token

### ğŸ”‘ å¿…è¦ãªãƒˆãƒ¼ã‚¯ãƒ³ãƒ»èªè¨¼æƒ…å ±

1. **Slack Appè¨­å®š**
   ```
   SLACK_BOT_TOKEN=xoxb-...
   SLACK_APP_TOKEN=xapp-...
   SLACK_TEAM_ID=T...
   ```

2. **GitHubè¨­å®š**
   ```
   GITHUB_TOKEN=ghp_...
   GITHUB_OWNER=TaT22444
   GITHUB_REPO=slack-mcp
   ```

3. **Cloudflareè¨­å®š**
   - Wrangler CLIèªè¨¼
   - Workersç„¡æ–™ãƒ—ãƒ©ãƒ³ï¼ˆæœˆ10ä¸‡ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼‰

---

## ã‚¹ãƒ†ãƒƒãƒ—1: åŸºç›¤æ§‹ç¯‰

### 1.1 ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸåŒ–

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ
mkdir NOROSHI
cd NOROSHI

# GitåˆæœŸåŒ–
git init
git remote add origin https://github.com/TaT22444/slack-mcp.git

# Node.jsåˆæœŸåŒ–
npm init -y

# ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install typescript @types/node
npm install --save-dev wrangler
```

### 1.2 TypeScriptè¨­å®š

```json
// tsconfig.json
{
  "compilerOptions": {
    "target": "ES2022",
    "module": "ES2022",
    "moduleResolution": "node",
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true,
    "types": ["@cloudflare/workers-types"]
  }
}
```

### 1.3 Wranglerè¨­å®š

```toml
# wrangler.toml
name = "noroshi-mcp-server"
main = "src/index.ts"
compatibility_date = "2024-12-20"
compatibility_flags = ["nodejs_compat"]

[triggers]
crons = [
  "5 13 * * 1-5",   # 22:05 JST
  "15 13 * * 1-5",  # 22:15 JST
  "25 13 * * 1-5",  # 22:25 JST
  "35 13 * * 1-5",  # 22:35 JST
  "45 13 * * 1-5"   # 22:45 JST
]
```

---

## ã‚¹ãƒ†ãƒƒãƒ—2: Slacké€£æºå®Ÿè£…

### 2.1 Slack Appä½œæˆ

1. **Slack API Console**ã§æ–°ã—ã„Appã‚’ä½œæˆ
2. **OAuth & Permissions**ã§ã‚¹ã‚³ãƒ¼ãƒ—è¨­å®š:
   ```
   channels:read
   chat:write
   users:read
   reactions:add
   ```
3. **Event Subscriptions**ã‚’æœ‰åŠ¹åŒ–
4. **Bot Token**ã¨**App Token**ã‚’å–å¾—

### 2.2 åŸºæœ¬ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å®šç¾©

```typescript
// src/index.ts (æŠœç²‹)
interface Env {
  SLACK_BOT_TOKEN: string
  SLACK_APP_TOKEN: string
  SLACK_TEAM_ID: string
  GITHUB_TOKEN?: string
  GITHUB_REPO?: string
  GITHUB_OWNER?: string
}

interface SlackEvent {
  type: string
  channel: string
  user: string
  text: string
  ts: string
  thread_ts?: string
}
```

### 2.3 Slack APIåŸºæœ¬æ©Ÿèƒ½

```typescript
/**
 * Slackãƒãƒ£ãƒ³ãƒãƒ«ä¸€è¦§ã‚’å–å¾—
 */
async listChannels(): Promise<string> {
  const response = await fetch('https://slack.com/api/conversations.list', {
    method: 'GET',
    headers: {
      'Authorization': `Bearer ${this.env.SLACK_BOT_TOKEN}`,
      'Content-Type': 'application/json'
    }
  })
  
  const data = await response.json()
  return JSON.stringify(data.channels, null, 2)
}
```

### 2.4 ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³å¿œç­”ã‚·ã‚¹ãƒ†ãƒ 

```typescript
/**
 * ã‚¿ã‚¹ã‚¯çŠ¶æ³å•ã„åˆã‚ã›ã‚’å‡¦ç†
 */
private async handleTaskStatusInquiry(text: string, channel: string, messageTs: string): Promise<void> {
  const mentionPatterns = [
    /<@([A-Z0-9]+)>\s*ã‚¿ã‚¹ã‚¯çŠ¶æ³ã‚’æ•™ãˆã¦/i,
    /<@([A-Z0-9]+)>\s*ã®ã‚¿ã‚¹ã‚¯çŠ¶æ³ã‚’æ•™ãˆã¦/i,
    /<@([A-Z0-9]+)>\s*ã‚¿ã‚¹ã‚¯ã‚’æ•™ãˆã¦/i,
    // ... ä»–ã®ãƒ‘ã‚¿ãƒ¼ãƒ³
  ]
  
  // ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°å‡¦ç†
  // ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å–å¾—
  // ã‚¿ã‚¹ã‚¯åˆ†æå®Ÿè¡Œ
  // çµæœæŠ•ç¨¿
}
```

---

## ã‚¹ãƒ†ãƒƒãƒ—3: GitHubé€£æºå®Ÿè£…

### 3.1 GitHub Personal Access Tokenè¨­å®š

1. GitHub Settings â†’ Developer settings â†’ Personal access tokens
2. å¿…è¦ãªã‚¹ã‚³ãƒ¼ãƒ—: `repo`, `contents`
3. ãƒˆãƒ¼ã‚¯ãƒ³ã‚’Cloudflare Secretsã«ä¿å­˜

### 3.2 ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œåŸºç›¤

```typescript
/**
 * UTF-8å¯¾å¿œã®Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰
 */
private encodeBase64(input: string): string {
  const encoder = new TextEncoder()
  const uint8Array = encoder.encode(input)
  
  let binary = ''
  for (let i = 0; i < uint8Array.length; i++) {
    binary += String.fromCharCode(uint8Array[i])
  }
  
  return btoa(binary)
}
```

### 3.3 ã‚¿ã‚¹ã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†

```typescript
/**
 * GitHubã‹ã‚‰ã‚¿ã‚¹ã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿å–ã‚Š
 */
private async getTasksFromGitHub(userName: string): Promise<TaskFileData[]> {
  // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒã‚§ãƒƒã‚¯
  const cacheKey = `tasks_${userName}`
  const cached = this.taskCache.get(cacheKey)
  
  if (cached && (Date.now() - cached.timestamp) < this.CACHE_DURATION) {
    return cached.data
  }

  // GitHub APIå‘¼ã³å‡ºã—
  const response = await fetch(
    `https://api.github.com/repos/${this.env.GITHUB_OWNER}/${this.env.GITHUB_REPO}/contents/ã‚¿ã‚¹ã‚¯`,
    {
      headers: {
        'Authorization': `Bearer ${this.env.GITHUB_TOKEN}`,
        'Accept': 'application/vnd.github.v3+json'
      }
    }
  )
  
  // ãƒ•ã‚¡ã‚¤ãƒ«è§£æãƒ»ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ›´æ–°
}
```

### 3.4 ãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›†æ©Ÿèƒ½

```typescript
/**
 * Markdownãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ï¼ˆå®Œå…¨ç½®æ›ï¼‰
 */
private async editMarkdownFile(fileName: string, content: string, userName: string): Promise<string> {
  const filePath = this.normalizeFilePath(fileName)
  const dateTime = new Date().toLocaleString('ja-JP', { timeZone: 'Asia/Tokyo' })

  // æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«å–å¾—
  // SHAå–å¾—
  // ãƒ•ã‚¡ã‚¤ãƒ«æ›´æ–°
  // çµæœè¿”å´
}
```

---

## ã‚¹ãƒ†ãƒƒãƒ—4: MCPæ©Ÿèƒ½å®Ÿè£…

### 4.1 MCP ProtocolåŸºç›¤

```typescript
/**
 * MCPãƒ—ãƒ­ãƒˆã‚³ãƒ«ã®ãƒãƒ³ãƒ‰ãƒ©ãƒ¼
 */
async fetch(request: Request): Promise<Response> {
  // CORSå¯¾å¿œ
  if (request.method === 'OPTIONS') {
    return new Response(null, {
      status: 200,
      headers: {
        'Access-Control-Allow-Origin': '*',
        'Access-Control-Allow-Methods': 'POST, OPTIONS',
        'Access-Control-Allow-Headers': 'Content-Type',
      },
    })
  }

  const body = await request.json() as MCPRequest
  
  switch (body.method) {
    case 'initialize':
      // åˆæœŸåŒ–å‡¦ç†
    case 'tools/list':
      // ãƒ„ãƒ¼ãƒ«ä¸€è¦§è¿”å´
    case 'tools/call':
      // ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œ
  }
}
```

### 4.2 MCPãƒ„ãƒ¼ãƒ«å®šç¾©

```typescript
// tools/list ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹
{
  tools: [
    {
      name: 'listChannels',
      description: 'Slackãƒãƒ£ãƒ³ãƒãƒ«ä¸€è¦§ã‚’å–å¾—ã—ã¾ã™',
      inputSchema: {
        type: 'object',
        properties: {},
        required: []
      }
    },
    {
      name: 'analyzeUserTasks',
      description: 'ç‰¹å®šãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¿ã‚¹ã‚¯çŠ¶æ³ã‚’åˆ†æã—ã¾ã™',
      inputSchema: {
        type: 'object',
        properties: {
          userName: { type: 'string', description: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼å' }
        },
        required: ['userName']
      }
    },
    // ... ä»–ã®12ãƒ„ãƒ¼ãƒ«
  ]
}
```

### 4.3 æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œãƒ„ãƒ¼ãƒ«

```typescript
// 5ã¤ã®æ–°è¦MCPãƒ„ãƒ¼ãƒ«
{
  name: 'editFile',
  description: 'GitHubãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¾ã™ï¼ˆCursorçµ±åˆå¯¾å¿œï¼‰'
},
{
  name: 'appendToFile', 
  description: 'GitHubãƒ•ã‚¡ã‚¤ãƒ«ã«å†…å®¹ã‚’è¿½åŠ ã—ã¾ã™'
},
{
  name: 'viewFile',
  description: 'GitHubãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã‚’è¡¨ç¤ºã—ã¾ã™'
},
{
  name: 'createFile',
  description: 'æ–°ã—ã„GitHubãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™'
},
{
  name: 'deleteLineFromFile',
  description: 'GitHubãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰æŒ‡å®šè¡Œã‚’å‰Šé™¤ã—ã¾ã™'
}
```

---

## ã‚¹ãƒ†ãƒƒãƒ—5: è‡ªå‹•åŒ–æ©Ÿèƒ½å®Ÿè£…

### 5.1 Cron Triggerè¨­å®š

```typescript
/**
 * Cron Triggerãƒãƒ³ãƒ‰ãƒ©ãƒ¼ - å®šæœŸçš„ãªã‚¿ã‚¹ã‚¯å ±å‘Š
 */
async scheduled(controller: ScheduledController): Promise<void> {
  const now = new Date()
  const hour = now.getUTCHours() + 9 // JSTå¤‰æ›
  const minute = now.getUTCMinutes()
  
  let reportMessage = ''
  
  if (hour === 22 && minute === 5) {
    reportMessage = 'ğŸŒƒ **22:05 å¤œã®ã‚¿ã‚¹ã‚¯çŠ¶æ³ã‚’ãŠçŸ¥ã‚‰ã›ã—ã¾ã™**'
  } else if (hour === 22 && minute === 15) {
    reportMessage = 'ğŸŒ™ **22:15 å¤œã®ã‚¿ã‚¹ã‚¯é€²æ—ã‚’ãŠçŸ¥ã‚‰ã›ã—ã¾ã™**'
  }
  // ... ä»–ã®æ™‚é–“å¸¯
  
  if (reportMessage) {
    await this.reportAllUserTasks(reportMessage, reportType)
  }
}
```

### 5.2 è‡ªå‹•ã‚¿ã‚¹ã‚¯å ±å‘Š

```typescript
/**
 * å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¿ã‚¹ã‚¯ã‚’å–å¾—ã—ã¦Slackã«å ±å‘Š
 */
private async reportAllUserTasks(headerMessage: string, reportType: string): Promise<void> {
  // GitHubã‹ã‚‰æœ€æ–°ã®ã‚¿ã‚¹ã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å–å¾—
  const allTaskData = await this.getAllUsersTasksFromGitHub()
  
  // å ±å‘Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ§‹ç¯‰
  let reportContent = `${headerMessage}\n\n`
  
  // å„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¿ã‚¹ã‚¯ã‚’å ±å‘Š
  for (const user of latestTaskFile.users) {
    reportContent += `## ğŸ‘¤ ${user.userName}\n`
    reportContent += `ğŸ“Š **ã‚¿ã‚¹ã‚¯æ•°**: ${user.tasks.length}ä»¶\n`
    // ... ã‚¿ã‚¹ã‚¯è©³ç´°
  }
  
  // Slackã«å ±å‘Šã‚’é€ä¿¡
  await this.sendTaskReport(reportContent, reportType)
}
```

### 5.3 ãƒ¦ãƒ¼ã‚¶ãƒ¼åãƒãƒƒãƒ”ãƒ³ã‚°

```typescript
/**
 * ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã‹ã‚‰è¡¨ç¤ºåã¸ã®ãƒãƒƒãƒ”ãƒ³ã‚°
 */
private getUserDisplayName(userId: string, slackUserName: string | null): string {
  const userDisplayMapping: Record<string, string> = {
    'U02TQ34K39S': 'ç›¸åŸç«‹å¼¥',  // å›ºå®šãƒãƒƒãƒ”ãƒ³ã‚°
    // ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒãƒƒãƒ”ãƒ³ã‚°
  }
  
  return userDisplayMapping[userId] || slackUserName || 'Unknown User'
}
```

---

## ã‚¹ãƒ†ãƒƒãƒ—6: ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ»é‹ç”¨

### 6.1 ç’°å¢ƒå¤‰æ•°è¨­å®š

```bash
# Cloudflareã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆè¨­å®š
npx wrangler secret put SLACK_BOT_TOKEN
npx wrangler secret put SLACK_APP_TOKEN  
npx wrangler secret put SLACK_TEAM_ID
npx wrangler secret put GITHUB_TOKEN
npx wrangler secret put GITHUB_REPO
npx wrangler secret put GITHUB_OWNER

# è¨­å®šç¢ºèª
npx wrangler secret list
```

### 6.2 ãƒ‡ãƒ—ãƒ­ã‚¤å®Ÿè¡Œ

```bash
# åˆå›ãƒ‡ãƒ—ãƒ­ã‚¤
npx wrangler deploy

# ãƒ‡ãƒ—ãƒ­ã‚¤ç¢ºèª
npx wrangler tail --format pretty
```

### 6.3 Cursor/Claude Desktopè¨­å®š

```json
// ~/.config/claude_desktop_config.json
{
  "mcpServers": {
    "noroshi-tasks": {
      "command": "npx",
      "args": [
        "mcp-remote",
        "https://noroshi-mcp-server.tatsu0823takasago.workers.dev"
      ]
    }
  }
}
```

### 6.4 å‹•ä½œç¢ºèª

1. **Slackè‡ªå‹•å¿œç­”ãƒ†ã‚¹ãƒˆ**
   ```
   @tatsu0823takasago ã‚¿ã‚¹ã‚¯æ•™ãˆã¦
   ```

2. **MCPæ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ**
   ```
   @noroshi-tasks ãƒãƒ£ãƒ³ãƒãƒ«ä¸€è¦§ã‚’å–å¾—
   ```

3. **è‡ªå‹•ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ç¢ºèª**
   - 22:05-22:45 JSTã«è‡ªå‹•æŠ•ç¨¿

---

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ğŸš¨ ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ–¹æ³•

#### 1. ã‚³ãƒ¼ãƒ‰ä¿®æ­£ãŒåæ˜ ã•ã‚Œãªã„

**ç—‡çŠ¶**: ã‚³ãƒ¼ãƒ‰ã‚’ä¿®æ­£ã—ãŸãŒSlackã«åæ˜ ã•ã‚Œãªã„

**åŸå› **: `npx wrangler deploy`ã‚’å¿˜ã‚Œã¦ã„ã‚‹

**è§£æ±ºæ–¹æ³•**:
```bash
npx wrangler deploy
```

#### 2. GitHub API ã‚¨ãƒ©ãƒ¼

**ç—‡çŠ¶**: `GitHub API error: 401`

**åŸå› **: ãƒˆãƒ¼ã‚¯ãƒ³ã®æ¨©é™ä¸è¶³ã¾ãŸã¯æœ‰åŠ¹æœŸé™åˆ‡ã‚Œ

**è§£æ±ºæ–¹æ³•**:
- Personal Access Tokenã«`repo`æ¨©é™ãŒã‚ã‚‹ã‹ç¢ºèª
- ãƒˆãƒ¼ã‚¯ãƒ³ã®æœ‰åŠ¹æœŸé™ã‚’ç¢ºèª
- æ–°ã—ã„ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç”Ÿæˆã—ã¦å†è¨­å®š

#### 3. Slackå¿œç­”ãªã—

**ç—‡çŠ¶**: ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ã—ã¦ã‚‚å¿œç­”ãŒãªã„

**åŸå› **: Events APIã®è¨­å®šå•é¡Œ

**è§£æ±ºæ–¹æ³•**:
1. Slack Appè¨­å®šã§Events APIãŒæœ‰åŠ¹ã‹ç¢ºèª
2. `message.channels`ã‚¤ãƒ™ãƒ³ãƒˆãŒè¿½åŠ ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
3. Request URLãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

#### 4. è‡ªå‹•ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ãŒå‹•ä½œã—ãªã„

**ç—‡çŠ¶**: å®šæ™‚ã«ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ãŒæŠ•ç¨¿ã•ã‚Œãªã„

**åŸå› **: Cronè¨­å®šã¾ãŸã¯ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³å•é¡Œ

**è§£æ±ºæ–¹æ³•**:
```bash
# ãƒ­ã‚°ç¢ºèª
npx wrangler tail --format pretty

# Cronè¨­å®šç¢ºèª
# JST = UTC+9 ã®å¤‰æ›ãŒæ­£ã—ã„ã‹ç¢ºèª
```

#### 5. MCPæ¥ç¶šã‚¨ãƒ©ãƒ¼

**ç—‡çŠ¶**: Cursorã‹ã‚‰MCPã‚µãƒ¼ãƒãƒ¼ã«æ¥ç¶šã§ããªã„

**åŸå› **: URLè¨­å®šã¾ãŸã¯CORSå•é¡Œ

**è§£æ±ºæ–¹æ³•**:
- Worker URLãŒæ­£ã—ã„ã‹ç¢ºèª
- CORSè¨­å®šãŒé©åˆ‡ã‹ç¢ºèª
- Claude Desktopè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®æ§‹æ–‡ç¢ºèª

### ğŸ“Š ãƒ­ã‚°ç›£è¦–

```bash
# ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ­ã‚°ç›£è¦–
npx wrangler tail --format pretty

# ç‰¹å®šæ™‚é–“ã®ãƒ­ã‚°
npx wrangler tail --since 1h

# ã‚¨ãƒ©ãƒ¼ã®ã¿ãƒ•ã‚£ãƒ«ã‚¿
npx wrangler tail --format pretty | grep -i error
```

### ğŸ’° ã‚³ã‚¹ãƒˆç®¡ç†

- **Cloudflare Workers**: ç„¡æ–™æ ã§æœˆ10ä¸‡ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
- **GitHub API**: ç„¡æ–™ï¼ˆèªè¨¼æ¸ˆã¿ã§5000ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/æ™‚é–“ï¼‰
- **é€šå¸¸ä½¿ç”¨**: æœˆ1000-5000ãƒªã‚¯ã‚¨ã‚¹ãƒˆç¨‹åº¦
- **å®Ÿè³ªç„¡æ–™**: ç„¡æ–™æ å†…ã§ååˆ†

---

## ğŸ“š å‚è€ƒè³‡æ–™

### å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [Model Context Protocol (MCP)](https://modelcontextprotocol.io/)
- [Cloudflare Workers](https://workers.cloudflare.com/)
- [Slack API](https://api.slack.com/)
- [GitHub API](https://docs.github.com/en/rest)

### é–‹ç™ºãƒ„ãƒ¼ãƒ«
- [Wrangler CLI](https://developers.cloudflare.com/workers/wrangler/)
- [TypeScript](https://www.typescriptlang.org/)

### ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£
- [MCP GitHub Organization](https://github.com/modelcontextprotocol)
- [Cloudflare Workers Discord](https://discord.gg/cloudflaredev)

---

## ğŸ‰ å®Œäº†ï¼

ã“ã‚Œã§NOROSHI MCPã‚µãƒ¼ãƒãƒ¼ã®ä½œæˆãŒå®Œäº†ã§ã™ã€‚ä»¥ä¸‹ã®æ©Ÿèƒ½ãŒåˆ©ç”¨å¯èƒ½ã«ãªã‚Šã¾ã™ï¼š

âœ… **Slackâ†”GitHubâ†”Cursorçµ±åˆ**  
âœ… **14ç¨®é¡ã®MCPãƒ„ãƒ¼ãƒ«**  
âœ… **è‡ªå‹•ã‚¿ã‚¹ã‚¯ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ï¼ˆ5å›/æ—¥ï¼‰**  
âœ… **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¿ã‚¹ã‚¯ç®¡ç†**  
âœ… **24æ™‚é–“365æ—¥ç¨¼åƒ**  

**é‡è¦**: ä¿®æ­£å¾Œã¯å¿…ãš`npx wrangler deploy`ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã‚’å¿˜ã‚Œãšã«ï¼

---

*ä½œæˆæ—¥: 2025å¹´6æœˆ16æ—¥*  
*ä½œæˆè€…: ç›¸åŸç«‹å¼¥*  
*ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 1.0* 